import{d as g,u as w,r as k,b as _,S as L,x as S,c as i,a as t,t as n,L as p,U as C,y as j,F as P,i as V,e as $,w as f,M,V as T,s as A,W as U,o as r}from"./index-B-8m7vOr.js";import{S as B}from"./SongMenu-Bd5b6pCI.js";const E={class:"relative"},F={class:"px-4 sm:px-6 md:px-8 pb-6 pt-12 sm:pt-16 hero-gradient flex flex-col sm:flex-row items-start sm:items-end gap-4 sm:gap-6 min-h-[200px] sm:min-h-[240px]"},I={class:"flex flex-col gap-2"},N={class:"flex flex-wrap items-center gap-2 text-sm font-medium text-white/80"},z={class:"px-4 sm:px-6 md:px-8 pb-8"},D={class:"w-full text-left border-collapse"},Q={class:"text-sm font-medium"},W=["onClick"],q={class:"py-3 px-3 text-text-subdued group-hover:text-white relative w-12"},G={class:"group-hover:hidden"},H={class:"py-3 px-3"},J={class:"flex items-center gap-3"},K=["src","alt"],O={key:1,class:"w-10 h-10 rounded bg-surface-highlight flex items-center justify-center"},R={class:"flex flex-col"},X={class:"text-white text-base font-normal truncate"},Y={class:"py-3 px-3 text-text-subdued group-hover:text-white truncate hidden sm:table-cell"},Z={class:"py-3 px-3 text-text-subdued group-hover:text-white hidden md:table-cell truncate"},tt={class:"py-3 px-3 text-text-subdued group-hover:text-white text-right"},et={class:"flex items-center justify-end gap-2"},st=["onClick"],lt=["onClick"],ot={class:"text-white/50 w-12 text-right"},at={key:0,class:"flex flex-col items-center justify-center py-20 text-text-subdued"},dt=g({name:"LikedView",__name:"LikedView",setup(it){const a=w(),o=C(),m=k(!1),u=async()=>{m.value=!0;try{o.value=await T()}catch(l){console.error("Failed to load liked songs:",l)}finally{m.value=!1}},h=(l,e)=>{const s=o.value.findIndex(d=>d.id===l.id&&d.platform===l.platform),c=s>=0?s:e;a.clearPlaylist(),a.addToPlaylist(o.value),a.playAt(c)},b=()=>{o.value.length>0&&(a.clearPlaylist(),a.addToPlaylist(o.value),a.playAt(0))},y=l=>{a.addToPlaylist(l),A.success("已添加到播放列表")},v=async l=>{await U(l.platform,l.id)&&(o.value=o.value.filter(s=>!(s.id===l.id&&s.platform===l.platform)))},x=()=>{u()};return _(()=>{u(),window.addEventListener("linmusic-liked-changed",x)}),L(()=>{u()}),S(()=>{window.removeEventListener("linmusic-liked-changed",x)}),(l,e)=>(r(),i("div",E,[t("div",F,[e[5]||(e[5]=t("div",{class:"w-[130px] h-[130px] sm:w-[180px] sm:h-[180px] shadow-2xl shadow-black/50 rounded-md bg-gradient-to-br from-indigo-800 to-indigo-400 flex items-center justify-center"},[t("span",{class:"material-symbols-outlined text-white text-[80px] fill-1"},"favorite")],-1)),t("div",I,[e[3]||(e[3]=t("span",{class:"text-sm font-bold uppercase tracking-wider"},"歌单",-1)),e[4]||(e[4]=t("h1",{class:"text-4xl sm:text-5xl md:text-7xl font-black tracking-tight text-white mb-2"},"我喜欢的音乐",-1)),t("div",N,[e[0]||(e[0]=t("div",{class:"w-6 h-6 rounded-full bg-primary flex items-center justify-center text-black font-bold text-xs"},"L",-1)),e[1]||(e[1]=t("span",{class:"hover:underline cursor-pointer"},"LinMusic",-1)),e[2]||(e[2]=t("span",null,"-",-1)),t("span",null,n(p(o).length)+" 首歌曲",1)])])]),t("div",{class:"px-4 sm:px-6 md:px-8 py-4 sm:py-6 flex items-center justify-between bg-background-base/30 backdrop-blur-sm sticky top-0 z-10"},[t("div",{class:"flex items-center gap-4 sm:gap-6"},[t("button",{class:"w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-primary hover:scale-105 hover:bg-primary/90 transition-all flex items-center justify-center shadow-lg shadow-black/40",onClick:b},[...e[6]||(e[6]=[t("span",{class:"material-symbols-outlined text-3xl text-black fill-1 ml-1"},"play_arrow",-1)])]),e[7]||(e[7]=t("button",{class:"text-text-subdued hover:text-white transition-colors"},[t("span",{class:"material-symbols-outlined text-3xl"},"shuffle")],-1))]),e[8]||(e[8]=t("div",{class:"flex items-center gap-4"},[t("div",{class:"flex items-center gap-2 text-text-subdued hover:text-white cursor-pointer transition-colors"},[t("span",{class:"material-symbols-outlined text-xl"},"search")])],-1))]),t("div",z,[t("table",D,[e[12]||(e[12]=t("thead",{class:"text-text-subdued text-sm border-b border-white/10 sticky top-[88px] bg-background-base z-10"},[t("tr",null,[t("th",{class:"font-normal py-2 px-3 w-12"},"#"),t("th",{class:"font-normal py-2 px-3 w-[35%]"},"歌曲标题"),t("th",{class:"font-normal py-2 px-3 w-[25%] hidden sm:table-cell"},"歌手"),t("th",{class:"font-normal py-2 px-3 w-[25%] hidden md:table-cell"},"专辑"),t("th",{class:"font-normal py-2 px-3 w-16 text-right"},[t("span",{class:"material-symbols-outlined text-lg align-middle"},"schedule")])])],-1)),t("tbody",Q,[(r(!0),i(P,null,V(p(o),(s,c)=>(r(),i("tr",{key:`${s.platform}-${s.id}`,class:"group hover:bg-white/10 rounded-md transition-colors border-b border-transparent cursor-pointer",onClick:d=>h(s,c)},[t("td",q,[t("span",G,n(c+1),1),e[9]||(e[9]=t("span",{class:"hidden group-hover:block material-symbols-outlined text-lg text-white"},"play_arrow",-1))]),t("td",H,[t("div",J,[s.coverUrl?(r(),i("img",{key:0,src:s.coverUrl,alt:s.name,class:"w-10 h-10 rounded shadow-sm object-cover"},null,8,K)):(r(),i("div",O,[...e[10]||(e[10]=[t("span",{class:"material-symbols-outlined text-text-subdued"},"music_note",-1)])])),t("div",R,[t("span",X,n(s.name),1)])])]),t("td",Y,n(s.artist),1),t("td",Z,n(s.album||"-"),1),t("td",tt,[t("div",et,[t("button",{class:"btn-icon text-white/30 hover:text-white opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-all duration-200",title:"添加到播放列表",onClick:f(d=>y(s),["stop"])},[...e[11]||(e[11]=[t("span",{class:"material-symbols-outlined text-[20px]"},"playlist_add",-1)])],8,st),t("span",{class:"material-symbols-outlined text-primary text-lg fill-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 cursor-pointer hover:scale-110 transition-transform",onClick:f(d=>v(s),["stop"])}," favorite ",8,lt),t("span",ot,n(p(M)(s.duration)),1),$(B,{song:s,"button-class":"opacity-100 md:opacity-0 md:group-hover:opacity-100"},null,8,["song"])])])],8,W))),128))])]),p(o).length===0&&!m.value?(r(),i("div",at,[...e[13]||(e[13]=[t("span",{class:"material-symbols-outlined text-6xl mb-4"},"favorite_border",-1),t("p",{class:"text-lg"},"还没有喜欢的歌曲",-1),t("p",{class:"text-sm mt-2"},"去搜索页面发现更多音乐吧",-1)])])):j("",!0)]),e[14]||(e[14]=t("div",{class:"h-24"},null,-1))]))}});export{dt as default};
